<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Лошадки</title>
  <link href="style.css" rel="stylesheet" />
</head>
<body>

    <div class="floatingPanel">
        <div class="article">

        </div>
    </div>
    <div class="main">

        <div class="filter">
            <p class="levelTitle">Уровень сложности:</p>
            <input type="range" min="0" max="3" value="0" class="slider" id="levelSlider" oninput="slider()">
            <span id="levelText">Все статьи</span><br>

            <div class="sportKindFilter"></div>

            <div class="tagsTitle">Теги:</div>
            <div class="tags"></div>

            <label for="accept">
                <input type="checkbox" id="hideRead" name="hideRead" value="yes">
                скрыть прочитанные статьи
            </label>
            <br>
            <label for="accept">
                <input type="checkbox" id="showReadLater" name="showReadLater" value="yes">
                показать только статьи из "прочесть позже"
            </label>
            <br>

            <button class="filterApply" onclick="filterApply()">Применить фильтры</button>
            <button class="filterReset" onclick="filterReset()">Сбросить</button>
        </div>

        <div class="sorting">
            <div class="sortingNewToOld" onclick="sortNewToOld()">сначала новые</div>
            <div class="sortingOldToNew" onclick="sortOldToNew()">сначала старые</div>
            <div class="sortingRandom" onclick="sortRandom()">случайный порядок</div>
        </div>
    </div>

  <script src="script.js"></script>

  <script>

    let scrollTo = 0;
    let floatingPanel = document.querySelector(".floatingPanel")

    loadPosts(data)

    // добавление event listener к floatingPanel, чтобы при нажатии закрывалась открытая статья
    floatingPanel.addEventListener("click", e => {
        if (e.target.className != "floatingPanel") return

        floatingPanel.style.opacity = "0"
        floatingPanel.style.pointerEvents = "none"

        document.querySelector(".main").style.maxHeight = null
        document.querySelector(".main").style.overflow = null
        window.scrollTo(0, scrollTo)
    })

    // создание кнопок с видами спорта для фильтра и добавление event listener
    let sportKindFilter = document.querySelector(".sportKindFilter")
    let sportKinds = ["Выездка", "Конкур", "Скачки", "Вестерн"]
    sportKinds.forEach(kind => {
        var div = document.createElement('div');
        div.className = "sportButton"
        div.innerHTML = kind

        div.addEventListener("click", e => {
            if(e.target.classList.contains("sportActive")){
                e.target.classList.remove("sportActive")
            } else {
                e.target.classList.add("sportActive")
            }
        })

        sportKindFilter.appendChild(div)
    })

     // создание кнопок с тегами для фильтра и добавление event listener
    let tagsFilter = document.querySelector(".tags")
    tags.forEach(tag => {
        var div = document.createElement('div');
        div.className = "tag"
        div.innerHTML = tag

        div.addEventListener("click", e => {
            if(e.target.classList.contains("tagActive")){
                e.target.classList.remove("tagActive")
            } else {
                e.target.classList.add("tagActive")
            }
        })

        tagsFilter.appendChild(div)
    })


  </script>
</body>
</html>
